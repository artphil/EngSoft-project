<!DOCTYPE html>
<html lang="pt-br">

<head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- essas 3 meta tags precisam estar logo apÃ³s a tag head do documento, qualquer outra meta tag pode ser declarada abaixo destas -->
        <title>
                RePouso - Quartos
        </title>

        <!-- link para o arquivo CSS do Bootstrap -->
        <link href="css/bootstrap.css" rel="stylesheet">

        <!-- link para o arquivo CSS do projeto -->
        <link href="css-agl/agl.css" rel="stylesheet">

        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

</head>


<body onload="myRequestRooms()">
        <div class="container">
                <div class="row">
                        <div class="col-lg-12">
                                <center>
                                        <h1>
                                                Quartos
                                        </h1>
                                </center>
                        </div>
                </div>
                <div class="row">
                        <div class="col-md-12">
                                <a class="btn btn-default" href="index.html" role="button">
                                        Voltar
                                </a>
                        </div>
                </div>

                <div class="row">
                        <div class="col-lg-12">
                                <h3>
                                        Gerencia de quartos
                                </h3>
                        </div>
                </div>


                <!-- <button type="button" onclick="myRequestRooms()" class="btn btn-default">
                        Atualiza
                </button> -->

                <div class="row">
                        <div class="col-md-3" id="rooms" > </div>
                        <div class="col-md-9">

                        </div>
                </div><div class="row">
                        <div class="col-md-3">
                                <img class="img-bar" src="img/cor_quarto.svg" alt="Responsive image" >
                        </div>

                </div>
        </div>

</body>

<script type="text/javascript">
var myRequestRooms = function()
{
        console.log("oi estou aqui");

        var roomsContainer = document.getElementById('rooms');

        var impressor = function(jsonData)
        {
                console.log(jsonData);

                for (var key of Object.keys(jsonData))
                {
                        var buttonElement = document.createElement('button');
                        buttonElement.innerHTML = key;
                        buttonElement.classList.add(["btn"]);
                        var status;
                        if (jsonData[key]['status'] == "vacant")
                        {
                                status = "btn-default";
                        }
                        else  if (jsonData[key]['status'] == "occupied")
                        {
                                status = "btn-warning";
                        }
                        else  if (jsonData[key]['status'] == "reserved")
                        {
                                status = "btn-primary";
                        }
                        buttonElement.classList.add(status);
                        roomsContainer.appendChild(buttonElement);
                }
        };
        console.log("oi estou aqui");

        window.fetch('http://127.0.0.1:4568/listRooms')
        .then(function(response)
        {
                console.log("GRRRUUUAAARRRRRRR");

                return response.json();
        })
        .then(impressor)
        .catch(function(err)
        {
                console.log("Oops, something went wrong!", err);
        });
};
</script>

<footer class="navbar-fixed-bottom">
        <center>
                <h5>
                        RePouSo - AGL Software - Copyrigth 2017
                </h5>
        </center>
</footer>

</html>
